#+TITLE: ZigZag Commitments
#+OPTIONS: author:nil creator:nil timestamp:nil

#+begin_src lisp :exports none
  (ql:quickload :orient)
#+end_src

#+RESULTS:
| :ORIENT |

* Graph
#+NAME: layer-0
#+BEGIN_SRC lisp :package "filecoin.theory" :results output silent :exports none 
(defparameter *zigzag-graph* (make-zigzag-graph 8 4))
(emit-layer-graph (nth 0 (zigzag-graph-layer-graphs *zigzag-graph*)))
#+END_SRC

Both renumbered and reversed parents are generated by a pseudorandom permutation and are provided only to illustrate the
nature of the zigzag commitment scheme. They accurately represent how parent-child relationships change between layers,
and are accurate for expander parents. However, this is not representative of the DRG parent selection algorithm.
#+BEGIN_SRC dot :file layer-0.png :var input=layer-0 :exports results
$input
#+END_SRC

#+RESULTS:
[[file:layer-0.png]]


#+NAME: layer-1
#+BEGIN_SRC lisp :package "filecoin.theory" :results output silent :exports none 
(emit-layer-graph (nth 1 (zigzag-graph-layer-graphs *zigzag-graph*)))
#+END_SRC

#+BEGIN_SRC dot :file layer-1.png :var input=layer-1 :exports results
$input
#+END_SRC

#+RESULTS:
[[file:layer-1.png]]


#+NAME: layer-2
#+BEGIN_SRC lisp :package "filecoin.theory" :results output silent :exports none 
(emit-layer-graph (nth 2 (zigzag-graph-layer-graphs *zigzag-graph*)))
#+END_SRC

#+BEGIN_SRC dot :file layer=2.png :var input=layer-2 :exports results
$input
#+END_SRC

#+RESULTS:
[[file:layer=2.png]]

#+NAME: layer-3
#+BEGIN_SRC lisp :package "filecoin.theory" :results output silent :exports none 
(emit-layer-graph (nth 3 (zigzag-graph-layer-graphs *zigzag-graph*)))
#+END_SRC

#+BEGIN_SRC dot :file layer=3.png :var input=layer-3 :exports results
$input
#+END_SRC

#+RESULTS:
[[file:layer=3.png]]

* Columns
#+BEGIN_SRC lisp :package "filecoin.theory" :exports results
(columns *zigzag-graph*)
#+END_SRC

#+RESULTS:
| (0, 1) | (0, 2) | (0, 3) | (0, 4) | (0, 5) | (0, 6) | (0, 7) | (0, 8) |
| (1, 8) | (1, 7) | (1, 6) | (1, 5) | (1, 4) | (1, 3) | (1, 2) | (1, 1) |
| (2, 1) | (2, 2) | (2, 3) | (2, 4) | (2, 5) | (2, 6) | (2, 7) | (2, 8) |
| (3, 8) | (3, 7) | (3, 6) | (3, 5) | (3, 4) | (3, 3) | (3, 2) | (3, 1) |

